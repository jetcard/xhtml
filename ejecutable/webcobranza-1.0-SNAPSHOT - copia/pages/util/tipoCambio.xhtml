<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="es" 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:of="http://omnifaces.org/functions">

    <ui:composition template="/resources/personal/plantillas/template.xhtml">
        <ui:define name="content">

            <!-- Paginacion header -->
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>Tipo Cambio</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="index.xhtml">Inicio</a>
                        </li>
                        <li>
                            <a>Util</a>
                        </li>
                        <li class="active">
                            <strong>Tipo Cambio</strong>
                        </li>
                    </ol>
                </div>
            </div>

            <!-- Filas-->
            <div class="wrapper wrapper-content animated fadeInRight">

                <!-- Filtros-->
                <div class="row">
                    <!-- Filtros-->
                    <div class="col-lg-12">
                        <div class="ibox">
                            <div class="ibox-title">
                                <h5>
                                    Filtros
                                    <small>Tipo de Cambio</small>
                                </h5>
                            </div>
                            <div class="ibox-content">
                                <!-- Fila 01 Filtros --> 
                                <div class="row">
                                    <form jsf:id="formTipoCambio" >
                                        <div class="col-sm-4">
                                            <div id="divRangoFecha" class="form-group">
                                                <label class="font-noraml">Rango de fechas</label>
                                                <div id="datepicker" class="input-daterange input-group">
                                                    <span class="input-group-addon">De</span>
                                                    <h:inputText class="input-sm form-control" id="start" value="#{tipoCambioBean.maeTipoCambio.fIniBusq}" >
                                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                                    </h:inputText>
                                                    <span class="input-group-addon">a</span>
                                                    <h:inputText class="input-sm form-control" id="end"  value="#{tipoCambioBean.maeTipoCambio.fFinBusq}" >
                                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                                    </h:inputText>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <span class="input-group-btn">
                                                <a jsf:id="buscar" jsf:action="#{tipoCambioBean.buscarTipoCambio()}" class="btn btn-primary btn-block m-t">
                                                    <i class="fa fa-search"></i>
                                                    Buscar
                                                </a>
                                            </span>                                   
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fila 0002 grabar -->
                <form jsf:id="formTipoCambioGrabar" >
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="ibox">
                                <div class="ibox-title">
                                    <h5>Nuevo</h5>
                                </div>
                                <div class="ibox-content">
                                    <div class="row"> 
                                        <div  class="col-sm-3">
                                            <div class="form-group">
                                                <label class="font-noraml">Fecha</label>
                                                <div id="data_1" >
                                                    <div class="input-group date">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </span>
                                                        <h:inputText class="input-sm form-control" id="dateInput" value="#{tipoCambioBean.maeTipoCambioG.fCambio}" >
                                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                                        </h:inputText>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label class="font-noraml">Compra</label>
                                                <input jsf:id="compra" jsf:value="#{tipoCambioBean.maeTipoCambioG.nTipoCambioCom}" 
                                                       class="input form-control" data-mask="9.999"
                                                       type="text" placeholder="0.000"/>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label class="font-noraml">Venta</label>
                                                <input jsf:id="venta" jsf:value="#{tipoCambioBean.maeTipoCambioG.nTipoCambioVen}" 
                                                       class="input form-control" data-mask="9.999"
                                                       type="text" placeholder="0.000"/>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <span class="input-group-btn">

                                                <button class="btn btn-sm btn-primary pull-right m-t-n-xs" 
                                                        jsf:id="btnIngresar" name="btnIngresar" jsf:action="#{tipoCambioBean.grabarTipoCambio()}" >
                                                    <f:ajax execute="formTipoCambioGrabar" render="msg" />
                                                    <strong>Grabar</strong>
                                                </button>

                                            </span>
                                        </div>
                                        <div jsf:id="msg" jsf:name="msg">
                                            <div jsf:rendered="#{tipoCambioBean.showMsg}">
                                                <script type="text/javascript">
                                                    $(document).ready(function () {
                                                        toastr.options = {
                                                            "closeButton": true,
                                                            "debug": false,
                                                            "progressBar": true,
                                                            "preventDuplicates": false,
                                                            "positionClass": "toast-top-right",
                                                            "onclick": null,
                                                            "showDuration": "400",
                                                            "hideDuration": "1000",
                                                            "timeOut": "7000",
                                                            "extendedTimeOut": "1000",
                                                            "showEasing": "swing",
                                                            "hideEasing": "linear",
                                                            "showMethod": "fadeIn",
                                                            "hideMethod": "fadeOut"
                                                        };
                                                        toastr.#{tipoCambioBean.tipoMsj}('#{tipoCambioBean.mensaje}', 'Mensaje');
                                                    });
                                                </script>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </form>

                <!-- Fila 0003 detalle -->
                <form jsf:id="formTipoCambioList" >
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>Detalle de Operaciones</h5>
                                </div>
                                <div class="ibox-content">

                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered table-hover dataTables-cliente-deudor" >
                                            <thead>
                                                <tr>
                                                    <th>N°</th>
                                                    <th>Fecha</th>
                                                    <th>Compra</th>
                                                    <th>Venta</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            <ui:repeat var="cambio" value="#{tipoCambioBean.maeTipoCambioList}" varStatus="cambioS">
                                                <tr class="gradeA">
                                                    <th>#{cambioS.index + 1}</th>
                                                    <th>#{cambio.getfCambio()}</th>
                                                    <th>#{cambio.getnTipoCambioCom()}</th>
                                                    <th>#{cambio.getnTipoCambioVen()}</th>
                                                </tr>
                                            </ui:repeat>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th>N°</th>
                                                    <th>Fecha</th>
                                                    <th>Compra</th>
                                                    <th>Venta</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </form>


            </div>  

            <!-- JS -->
            <!-- Mainly scripts -->
            <script src="../../resources/template/js/jquery-2.1.1.js"></script>
            <script src="../../resources/template/js/bootstrap.min.js"></script>

            <!-- Custom and plugin javascript -->
            <script src="../../resources/template/js/inspinia.js"></script>
            <script src="../../resources/template/js/plugins/pace/pace.min.js"></script>
            <script src="../../resources/template/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>


            <!-- Data picker -->
            <script src="../../resources/template/js/plugins/datapicker/bootstrap-datepicker.js"></script>

            <!-- MENU -->
            <script src="../../resources/template/js/plugins/metisMenu/jquery.metisMenu.js"></script>

            <!-- Date range use moment.js same as full calendar plugin -->
            <script src="../../resources/template/js/plugins/fullcalendar/moment.min.js"></script>

            <!-- Date range picker -->
            <script src="../../resources/template/js/plugins/daterangepicker/daterangepicker.js"></script>

            <!-- grafico personal -->
            <script src="../../resources/personal/js/table.js"></script> 

            <!--- tabla -->
            <script src="../../resources/template/js/plugins/jeditable/jquery.jeditable.js"></script>
            <script src="../../resources/template/js/plugins/dataTables/datatables.min.js"></script>

            <link href="../../resources/template/css/plugins/dataTables/datatables.min.css" rel="stylesheet"/>
            
            <!-- FooTable -->
            <script src="../../resources/template/js/plugins/footable/footable.all.min.js"></script>
            <link href="../../resources/template/css/plugins/footable/footable.core.css" rel="stylesheet"/>

            <!-- Input Mask-->
            <script src="../../resources/template/js/plugins/jasny/jasny-bootstrap.min.js"></script>
            <link href="../../resources/template/css/plugins/jasny/jasny-bootstrap.min.css" rel="stylesheet"/>

            <!-- Toastr script -->
            <script src="../../resources/template/js/plugins/toastr/toastr.min.js"></script>
            <!-- Toastr style -->
            <link href="../../resources/template/css/plugins/toastr/toastr.min.css" rel="stylesheet"/>


            <!--- Css datapicker -->
            <link href="../../resources/template/css/plugins/datapicker/datepicker3.css" rel="stylesheet"/>
            <link href="../../resources/template/css/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet"/>
            <link href="../../resources/template/css/plugins/clockpicker/clockpicker.css" rel="stylesheet"/>

            <h:outputScript library="javax.faces" name="jsf.js"/>

            <script >
                                                    $('#divRangoFecha .input-daterange').datepicker({
                                                        keyboardNavigation: false,
                                                        forceParse: false,
                                                        autoclose: true,
                                                        format: 'dd/mm/yyyy',
                                                        language: 'es',
                                                        todayBtn: "linked"
                                                    });
                                                    $('#data_1 .input-group.date').datepicker({
                                                        timePicker: true,
                                                        timePickerIncrement: 30,
                                                        startDate: '01/01/2008',
                                                        endDate: '01/01/2025',
                                                        format: 'dd/mm/yyyy',
                                                        language: 'es',
                                                        todayBtn: "linked",
                                                        autoclose: true
                                                    });
            </script>

        </ui:define>

    </ui:composition> 

</html>